#                              后端存储实战

## 03 设计复杂而又重要的购物车系统

### 设计购物车存储时需要把握什么原则

1. 未登录需要临时暂存购物车的商品
2. 登录时，把暂存购物车的商品合并到用户的购物车中，并且清除缓存购物车
3. 登陆后，购物车的商品在各种端同步

   总的来说，购物车系统需要保存两类购物车：未登录，已登录

### 如何设计“暂存购物车”的存储

存在服务段浪费资源

客户端的存储选择：Session， Cookie， LocalStorage

|            Session             |                            Cookie                            |         LocalStorage         |
| :----------------------------: | :----------------------------------------------------------: | :--------------------------: |
| 保留时间短，实际还是存在服务端 | 客户端和服务端每次交互都自动带着Cookie数据往返，实现简单，但内存小 4 KB | 业务逻辑复杂，但是存储容量大 |

### 如何设计“用户购物车的存储”

